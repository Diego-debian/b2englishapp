# T3.3 Focus E2E Validation

> End-to-end validation del modo Focus.

---

## Status de Ejecución

| Método | Estado |
|--------|--------|
| Browser automation | ❌ No disponible (connection reset) |
| Manual testing | ⏳ Requiere ejecución por Diego |

> **Nota:** Los escenarios están documentados para ejecución manual.
> Diego debe ejecutar y registrar resultados.

---

## Precondiciones

1. Backend running: `docker-compose up -d`
2. Frontend running: `npm run dev` en `/frontend`
3. Usuario de prueba creado y logged in
4. Navegador: Chrome/Firefox moderno

---

## Escenarios de Prueba

### S1 — Happy Path con Errores

**Pasos:**
1. Navegar a `/practice/focus`
2. Seleccionar cualquier tense (ej: Present Simple)
3. Click "Start Focused Practice"
4. Responder 5 preguntas (al menos 1 incorrecta intencionalmente)
5. Ver summary

**Verificar:**
- [ ] Summary muestra score correcto (ej: 4/5)
- [ ] Sección "Mistakes to Fix" visible
- [ ] Errores muestran: prompt, tu respuesta (tachada), respuesta correcta
- [ ] Badge "REPEAT THIS" visible en errores
- [ ] Botón "Repeat Mistakes Only (N)" visible con count correcto

**Continuar:**
6. Click "Retry Same Tense"

**Verificar:**
- [ ] Nueva sesión inicia con el mismo tense
- [ ] 5 nuevas preguntas (pueden repetir del banco)
- [ ] Progreso reinicia a 1/5

**Resultado:** `[ ] OK` `[ ] FAIL`

**Notas:**
```
(Registrar observaciones aquí)
```

---

### S2 — Happy Path Perfecto

**Pasos:**
1. Navegar a `/practice/focus`
2. Seleccionar tense
3. Responder todas las preguntas correctamente (5/5)
4. Ver summary

**Verificar:**
- [ ] Score: 5/5
- [ ] Mensaje "All correct!" visible
- [ ] Texto "Great work on this session."
- [ ] NO aparece sección "Mistakes to Fix"
- [ ] Botón "Retry Same Tense" es prominente (indigo)
- [ ] Botón "Choose Different Tense" visible

**Resultado:** `[ ] OK` `[ ] FAIL`

**Notas:**
```
(Registrar observaciones aquí)
```

---

### S3 — Cambio de Tense

**Pasos:**
1. Completar cualquier sesión Focus
2. En summary, click "Choose Different Tense"

**Verificar:**
- [ ] Vuelve a pantalla de selección de tense
- [ ] Grid de 12 tenses visible
- [ ] Ningún tense pre-seleccionado

**Continuar:**
3. Seleccionar tense diferente al anterior
4. Click "Start Focused Practice"

**Verificar:**
- [ ] Nueva sesión inicia con el tense seleccionado
- [ ] Preguntas corresponden al nuevo tense

**Resultado:** `[ ] OK` `[ ] FAIL`

**Notas:**
```
(Registrar observaciones aquí)
```

---

### S4 — Refresh / Navegación

**Pasos:**
1. Iniciar Focus, estar en pregunta 2 o 3
2. Presionar F5 (refresh)

**Verificar:**
- [ ] Página recarga sin crash
- [ ] Comportamiento esperado: vuelve a selección de tense (sesión se pierde)
- [ ] NO hay error en consola bloqueante

**Pasos adicionales:**
3. Iniciar nueva sesión
4. En pregunta 3, usar botón Back del navegador

**Verificar:**
- [ ] Navegación funciona
- [ ] No hay crash/freeze

**Resultado:** `[ ] OK` `[ ] FAIL`

**Notas:**
```
(Registrar observaciones aquí)
```

---

### S5 — Edge UX

**5a. Cerrar pestaña y volver:**
1. Estar en Focus (cualquier punto)
2. Cerrar pestaña
3. Abrir nueva pestaña → `/practice/focus`

**Verificar:**
- [ ] Carga normalmente
- [ ] Sesión anterior NO persiste (comportamiento esperado)

**5b. Navegación entre páginas:**
1. Iniciar Focus
2. Click en "Back to Practice" (link arriba)

**Verificar:**
- [ ] Navega a `/practice`
- [ ] Volver a Focus reinicia desde selección

**Resultado:** `[ ] OK` `[ ] FAIL`

**Notas:**
```
(Registrar observaciones aquí)
```

---

## Resumen de Resultados

| Escenario | Resultado | Bloqueante? |
|-----------|-----------|-------------|
| S1 - Happy path con errores | ⏳ Pendiente | - |
| S2 - Happy path perfecto | ⏳ Pendiente | - |
| S3 - Cambio de tense | ⏳ Pendiente | - |
| S4 - Refresh/navegación | ⏳ Pendiente | - |
| S5 - Edge UX | ⏳ Pendiente | - |

---

## Problemas Detectados

| ID | Escenario | Descripción | Severidad |
|----|-----------|-------------|-----------|
| - | - | (ninguno registrado aún) | - |

---

## Veredicto Final

⏳ **Pendiente de ejecución manual por Diego**

Opciones de veredicto después de ejecutar:
- ✅ "Focus listo para beta"
- ⚠️ "Listo con excepciones: [lista]"
- ❌ "No listo: [bloqueantes]"

---

## Instrucciones para Diego

1. Ejecutar cada escenario S1-S5
2. Marcar checkboxes como `[x]` cuando pase
3. Registrar notas en secciones correspondientes
4. Completar tabla "Resumen de Resultados"
5. Agregar problemas a tabla "Problemas Detectados"
6. Escribir veredicto final

---

## Archivos Tocados

- `docs/t3.3-focus-e2e.md` (this file)

---

*Creado: 2026-01-17*
