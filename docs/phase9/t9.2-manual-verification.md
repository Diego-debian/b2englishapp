# Phase 9.2 Manual Verification Guide

This document provides strict instructions for verifying the Public Content API.

## 1. Environment Setup

The Content API is hidden behind a Feature Flag. You must enable it.

**Method A: .env file**
Add the following line to your backend `.env` file:
```env
FEATURE_CONTENT_API_V1=true
```

**Method B: Shell Environment**
```bash
# PowerShell
$env:FEATURE_CONTENT_API_V1="true"
```

## 2. Database Seeding (Manual)

Since there is no Admin UI yet, you must seed independent content data.
This script was created in `backend/scripts/seed_content.py`.

**Run Protocol (from Project Root):**
```bash
# 1. Ensure you are in the root directory (where backend/ folder is visible)
# 2. Add current directory to PYTHONPATH if needed (PowerShell example)
$env:PYTHONPATH="."

# 3. Run the module
python -m backend.scripts.seed_content
```

**Expected Output:**
```
ðŸŒ± Seeding Content Items...
âœ… Tables verified/created
âœ… Created: present-simple-guide (published)
âœ… Created: past-continuous-deep-dive (published)
âœ¨ Seeding complete.
```

## 3. API Verification (Curl)

Ensure your backend is running (`uvicorn backend.app.main:app --reload`).

### 3.1 List Published Content
```bash
curl "http://localhost:8000/content"
```
**Expected:** JSON object with `items` list containing the published articles.

### 3.2 Get Specific Article
```bash
curl "http://localhost:8000/content/present-simple-guide"
```
**Expected:** JSON with `slug`, `title`, and `body` populated.

### 3.3 Verify Draft Security (404)
```bash
curl -I "http://localhost:8000/content/future-perfect-draft"
```
**Expected:** `404 Not Found` (This item exists in seed but is `draft`).

### 3.4 Feature Flag Test
1. Stop server.
2. Unset feature flag (or set to `false`).
3. Restart server.
4. Run `curl -I "http://localhost:8000/content"`.
5. **Expected:** `404 Not Found` (Router should not be mounted).

## 4. Files Created/Modified
- `backend/app/models/content.py` (New Model)
- `backend/app/schemas/content.py` (New Pydantic Schema)
- `backend/app/crud/content.py` (New CRUD)
- `backend/app/routers/content.py` (New Router)
- `backend/scripts/seed_content.py` (New Manual Seed)
- `backend/app/settings.py` (Added Flag)
- `backend/app/main.py` (Conditional Mount)
- `backend/app/**/__init__.py` (Exports)

## 5. Risks & Notes
- **No Alembic**: Tables are created via `create_all()` on startup. This is consistent with current repo state but risky for future schema changes.
- **No Write API**: Content is currently read-only. Editing requires DB access or future Admin API.
