# Phase 9.3 Manual Verification Guide

This document provides strict instructions for verifying the Frontend Integration of the Public Content API (Phase 9.3).

## 1. Prerequisites
- Backend running (`uvicorn backend.app.main:app --reload` on port 8000)
- Frontend running (`npm run dev` on port 3000) or built (`npm run start`)
- Database seeded (`python -m backend.scripts.seed_content` - See T9.2 guide)

## 2. Test Cases

### Case A: Default State (Everything OFF)
**Setup:**
- `backend/.env`: `FEATURE_CONTENT_API_V1=false` (or unset)
- `frontend/.env.local`: `NEXT_PUBLIC_FEATURE_CONTENT_BACKEND_READ_V1=false` (or unset)
- Restart both servers.

**Verification:**
1. Browse `http://localhost:3000/content/feed`
2. **Expect:** The feed should load **MOCK CONTENT** (standard items like "Present Simple Guide").
3. **Check:** Inspect Network tab. No request to `http://localhost:8000/content`.
4. Browse `http://localhost:3000/content/present-simple-guide`
5. **Expect:** Article loads correctly from Mock.

### Case B: Flag ON + Backend ON (Ideal State)
**Setup:**
- `backend/.env`: `FEATURE_CONTENT_API_V1=true`
- `frontend/.env.local`: `NEXT_PUBLIC_FEATURE_CONTENT_BACKEND_READ_V1=true`
- Restart both servers.

**Verification:**
1. Browse `http://localhost:3000/content/feed`
2. **Expect:** Feed loads content from the **DATABASE**.
   - *Tip:* You can verify this by modifying a title in the DB or Seed script vs the Mock file.
   - Or check server logs: Backend should show `GET /content 200`.
3. Browse `http://localhost:3000/content/present-simple-guide`
4. **Expect:** Article loads from Backend.

### Case C: Flag ON + Backend OFF (Fallback Test)
**Setup:**
- Keep frontend flag ON (`NEXT_PUBLIC_FEATURE_CONTENT_BACKEND_READ_V1=true`).
- **STOP the backend server** (Ctrl+C).

**Verification:**
1. Refresh `http://localhost:3000/content/feed`
2. **Expect:** The page **MUST NOT CRASH**.
3. **Expect:** It should transparently fallback to **MOCK CONTENT** after a short delay (2s timeout).
   - *Note:* Next.js Server Components might log the fetch error in the server terminal, but the UI should show the fallback.

### Case D: Slug Not Found
**Setup:** Backend ON, Flags ON.
1. Browse `http://localhost:3000/content/fake-slug-12345`
2. **Expect:** 404 Not Found Page (Standard Next.js 404).

## 3. Implementation Summary
- **Files Touched:**
    - `frontend/lib/contentClient.ts` (New Adapter)
    - `frontend/lib/featureFlags.ts` (New Flag)
    - `frontend/app/content/feed/page.tsx` (Converted to Server Component)
    - `frontend/app/content/feed/FeedClient.tsx` (New Client Wrapper)
    - `frontend/app/content/[slug]/page.tsx` (Converted to Server Component)
    - `frontend/app/content/[slug]/ContentDetailClient.tsx` (New Client Wrapper)

## 4. Risks & Notes
- **Server Components:** Data fetching now happens on the Node.js server side. Env var `NEXT_PUBLIC_API_URL` is used.
- **Timeout:** There is a 2s hard timeout on backend fetches to prevent hanging pages.
