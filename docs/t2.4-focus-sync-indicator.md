# T2.4 Focus Sync Indicator

> UI feedback for Focus session results sync to backend.

---

## What Focus Sync DOES

- Sends session results to `POST /focus/results`
- Records: `tense_slug`, list of `{question_id, is_correct}`
- Creates `ActivityAttempt` and `QuestionAttempt` records in database

## What Focus Sync DOES NOT Do

- ❌ Does NOT update `UserProgress` (SRS per-verb tracking)
- ❌ Does NOT affect streak in Dashboard
- ❌ Does NOT update XP

> See [t2.3-focus-progress-bridge.md](t2.3-focus-progress-bridge.md) for why:
> Focus questions have no `verb_id` mapping — they are grammar exercises, not verb drills.

---

## Files Modified

| File | Change |
|------|--------|
| `frontend/app/practice/focus/page.tsx` | Updated sync indicator copy |

---

## Sync States

| State | UI Copy |
|-------|---------|
| `idle` | (nothing shown) |
| `syncing` | "Syncing…" (animated) |
| `synced` | "✓ Results synced" (green) |
| `pending` | "⚠ Results sync pending" + Retry button |

---

## Copy Rules (T2.4)

**Allowed:**
- "Results synced"
- "Results sync pending"
- "Syncing…"
- "Retry"

**Forbidden (per task spec):**
- ❌ "progress"
- ❌ "SRS"
- ❌ "streak"

---

## Manual Testing

### A) Backend ON — Normal flow

1. `npm run dev` (frontend) + backend running
2. Login → `/practice/focus`
3. Complete 5-question session
4. Summary shows "✓ Results synced"

### B) Backend OFF — Failure flow

1. Stop backend (`docker-compose stop backend`)
2. Complete Focus session
3. Summary shows "⚠ Results sync pending" + Retry button
4. Click Retry → Shows "Syncing…" briefly → Back to "pending"

### C) Recovery flow

1. Start with backend OFF, complete session → "pending"
2. Start backend (`docker-compose start backend`)
3. Click "Retry"
4. Summary updates to "✓ Results synced"

---

## Build Verification

```bash
cd frontend
npm run build
```

Expected: No errors, clean build.

---

## Changelog

| Version | Date | Changes |
|---------|------|---------|
| 1.0.0 | 2026-01-17 | Initial implementation |
| 1.1.0 | 2026-01-17 | Updated copy: "Results synced" / "Results sync pending" |
