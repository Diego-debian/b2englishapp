# T0.3 Content Specification (Beta)

Este documento especifica el modelo de contenido "tipo WordPress" para B2English. Define la estructura de datos conceptual para Lessons y Blocks, sin implementar código ni base de datos.

## 1. Propósito

El sistema de contenido busca:
- Permitir la creación flexible de lecciones editoriales sin requerir cambios de código para cada nueva lección.
- Desacoplar el contenido (texto, video, explicaciones) de la lógica de negocio (ejercicios, XP).
- **NO ES**: Un LMS completo, ni un sistema de examen, ni un reemplazo para la práctica de verbos (Focus/Run).

---

## 2. Entidad: Lesson

Unidad contenedora de una lección editorial.

### Campos
- `slug` (ID único, URL-friendly): ej. `past-simple-intro`.
- `title` (Texto): Título visible de la lección.
- `description` (Texto corto): Resumen para la tarjeta de lista.
- `order` (Entero): Para ordenar lecciones secuencialmente.
- `is_published` (Bool): Flag de visibilidad.

### Estados
- **Draft**: Visible solo en entorno dev/admin.
- **Published**: Visible para usuarios finales.
- **Archived**: No visible, pero preservado.

---

## 3. Entidad: Block

Unidad atómica de contenido dentro de una Lesson. Una Lesson es una lista ordenada de Blocks.

### Campos Comunes
- `id` (UUID/Auto-int): Identificador interno.
- `lesson_id`: FK a la Lesson padre.
- `type`: Tipo de bloque (`text`, `youtube`, `cta`).
- `order`: Posición relativa en la lección.

### Tipos Permitidos (BetaScope)

#### A. Block: `text`
- **Contenido**: Markdown básico (H1, H2, Bold, Italic, Listas).
- **Uso**: Explicaciones gramaticales, ejemplos escritos, notas culturales.

#### B. Block: `youtube`
- **Video ID**: ID del video de YouTube (ej. `dQw4w9WgXcQ`).
- **Start/End** (Opcional): Segundos para recortar el segmento relevante.
- **Caption** (Opcional): Texto al pie del video.

#### C. Block: `cta` (Call to Action)
- **Label**: Texto del botón (ej. "¡Practica el Past Simple ahora!").
- **Action URL**: Link de destino (ej. `/app/focus/past-simple`).
- **Style**: Primario (destacado) o Secundario (link simple).

---

## 4. Especificación de Comportamiento (Block Specs)

- **Renderizado**:
    - La lección renderiza los bloques verticalmente en orden.
    - Los bloques de texto soportan Markdown seguro (sin script tags).
    - Los bloques de YouTube usan el player `lite-youtube-embed` o similar para performance.
    - Los CTA son simples anclas (`<a>` o `<Link>`) estilizadas como botones.

---

## 5. Reglas de Integración (Strict Rules)

1.  **NO XP**:
    - Leer una lección **NO** otorga XP.
    - Ver un video **NO** otorga XP.
    - Razón: El XP está reservado para *demostrar conocimiento* (ejercicios), no para *consumir información*.

2.  **NO Progress**:
    - No hay "mark as complete".
    - No hay % de completud de lección.
    - El estado de lectura es efímero o cliente-side (opcional).

3.  **CTA solo Redirección**:
    - Los botones CTA **NO** ejecutan lógica compleja (ni API calls, ni updates).
    - Solo redirigen a rutas existentes de la App (Focus Mode, Dashboard).

---

## 6. Alcance Beta (Fuera de Scope)

Explicitamente **NO** incluido en esta fase:
- **Audio Blocks**: Soportar archivos mp3 directos (costoso).
- **Interactive Quizzes**: Preguntas in-line dentro de la lección (complejidad stateful).
- **User Tracking**: "Donde me quedé", "Lecciones vistas".
- **Rich Media**: Imágenes subidas al servidor (usar CDN o embed externo por ahora).
- **Comentarios**: Sistema de comentarios de usuarios.

---

## 7. Ejemplo Narrativo (Lesson: "The Magic of Past Simple")

> **Titulo**: The Magic of Past Simple
>
> **Block 1 (Text)**:
> "Bienvenido. Hoy vamos a desmitificar el pasado simple. Es el tiempo más usado para contar historias."
>
> **Block 2 (YouTube)**:
> [Video: "Past Simple in 60 seconds" (ID: 12345)]
>
> **Block 3 (Text)**:
> "Como viste en el video, la clave es la terminación -ed para regulares. Pero ¡cuidado con los irregulares! Mira esta lista..."
>
> **Block 4 (Text)**:
> "Ejemplo: I *went* ( irreg) to the park, and I *played* (reg) soccer."
>
> **Block 5 (CTA)**:
> [Boton: "Entrena Irregulares Ahora" -> Redirige a `/app/focus/irregular-verbs`]
