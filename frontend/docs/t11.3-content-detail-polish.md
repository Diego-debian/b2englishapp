# Task 11.3: Content Detail Polish

## Overview
This task implements a visual polish for the "Content Detail" view (Legacy UI), strictly adhering to the `NEXT_PUBLIC_FEATURE_UI_V11` feature flag system.

## Changes

### 1. `lib/designSystem.ts`
- Consolidated `ds` object layout.
- Added `meta` token group:
  - `row`: Container for metadata lines.
  - `date`: Stylized date text.
  - `tag`: (Prepared but generally unused in legacy detail view).
- Added `media` token group:
  - `wrapper`: For responsive embeds.
- Extended `ds.typo` group:
  - `quote`, `link`, `list`, `codeInline`, `codeBlock`: To support `react-markdown` component mapping.

### 2. `app/content/[slug]/ContentDetailClient.tsx`
- Refactored the "legacy UI" return block (lines 142+) to use `ds` tokens.
- **Key Strategy**: The `components` prop of `ReactMarkdown` now applies `ds.typo.xx` classes.
- **Flag logic**: When `FEATURE_UI_V11` is OFF, the functions return exactly the legacy Tailwind classes, ensuring **zero visual regression**.
- **Flag ON**: Returns cleaner, tailored design system classes.

## Verification

### Feature Flag: `NEXT_PUBLIC_FEATURE_UI_V11`
- **Default**: `false` (OFF).

### Checklist

1.  **Build Verification**:
    - [ ] `npm run build` passes.

2.  **Manual Verification (Flag OFF)**:
    - [ ] Visit a content detail page (e.g., `/content/some-slug`).
    - [ ] Confirm layout is identical to production.
    - [ ] Confirm colors (violet-400 dates, slate-300 body) are preserved.
    - [ ] Confirm markdown list markers, blockquotes, and code blocks look correctly "legacy".

3.  **Manual Verification (Flag ON)**:
    - [ ] Enable flag in `.env.local`.
    - [ ] Visit the same page.
    - [ ] Verify improvements:
        - Typography scale and readability.
        - Spacing in lists and blockquotes.
        - Color contrast improvements (if any defined in tokens).
    - [ ] Responsiveness check on mobile.

## Risks
- **Markdown components**: Since `react-markdown` uses a `components` map, manual overrides might conflict if `prose` class was also applied globally. We opted for specific token application to `className` prop of standard HTML elements to maintain control and legacy safety.
